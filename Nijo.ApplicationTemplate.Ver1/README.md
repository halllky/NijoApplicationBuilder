# Nijo アプリケーションテンプレート

このプロジェクトは、Nijoによって生成されるアプリケーションのテンプレートを提供します。フロントエンド（React）、バックエンド（WebAPI）、およびコアロジックの3層アーキテクチャで構成されています。

## プロジェクト構成
- [`Core/`](./Core/): ビジネスロジックを含むコアプロジェクト。Core.AutoGeneratedを利用しながらビジネスロジックを記述する。
- [`Core.AutoGenerated/`](./Core.AutoGenerated/): ビジネスロジックを含むコアプロジェクト。Nijoによって自動生成される。
- [`WebApi/`](./WebApi/): WebAPIプロジェクト（バックエンド）。Coreを参照する。
- [`react/`](./react/): Reactプロジェクト（フロントエンド）
- [`Test/`](./Test/): ユニットテストプロジェクト

## 主要なファイル
- [`nijo.xml`](./nijo.xml): スキーマ定義ファイル

## 開発用スクリプト
- [`tsc.bat`](./tsc.bat): TypeScriptのコンパイル実行
- [`build-and-error-check.bat`](./build-and-error-check.bat): プロジェクトのビルドとエラーチェック
- [`migration.bat`](./migration.bat): データベースマイグレーションの実行

## 開発フロー
1. [`nijo.xml`](./nijo.xml)でスキーマを定義
2. [`run-nijo-exe.bat`](./run-nijo-exe.bat)を実行してコードを生成
3. 必要に応じて[`migration.bat`](./migration.bat)でDBマイグレーションを実行
4. Core, Webapi, reactの開発を実施

## テスト
テストランナーには NUnit 、カバレッジ収集ツールには Coverlet を使用しています。
以下のコマンドでテストを実行すると [TestResults](./Test/TestResults/) フォルダに結果が出力されます。

```cmd
dotnet test --collect:"XPlat Code Coverage"
```

この結果を閲覧するには `dotnet-reportgenerator-globaltool` がインストールされている必要があります。

```cmd
dotnet tool install -g dotnet-reportgenerator-globaltool
```

TestResultsフォルダ内の、ファイル更新時刻がテスト実施時刻になっているフォルダのGUIDを控えておき、
以下のコマンドを実行して結果をhtmlで閲覧することができます。

```cmd
cd このREADMEがあるフォルダ

reportgenerator ^
  -reports:"Test\TestResults\{guid}\coverage.cobertura.xml" ^
  -targetdir:"Test\TestResults\coveragereport" ^
  -reporttypes:Html
```
