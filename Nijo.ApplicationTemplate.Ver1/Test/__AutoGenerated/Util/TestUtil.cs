namespace MyApp;

/// <summary>
/// ユニットテスト用のユーティリティクラス。
/// このインスタンスの生存期間はユニットテストのテストケース1個分と対応する。
/// </summary>
public interface ITestUtil : IDisposable {
    /// <summary>
    /// <see cref="ITestScope"/> のインスタンスを作成する。
    /// </summary>
    ITestScope<TMessageRoot> CreateScope<TMessageRoot>(IPresentationContextOptions? options = null) where TMessageRoot : IMessageContainer;
}

/// <summary>
/// ユニットテスト用のユーティリティクラス。
/// このインスタンスの生存期間は <see cref="AutoGeneratedApplicationService"/> のライフサイクル（webapiの場合はHTTPリクエスト1回分）に相当する。
/// </summary>
public interface ITestScope<TMessageRoot> : IDisposable where TMessageRoot : IMessageContainer {
    /// <summary>
    /// アプリケーションサービスのインスタンス
    /// </summary>
    AutoGeneratedApplicationService App { get; }
    /// <summary>
    /// <see cref="IPresentationContext"/> のインスタンス
    /// </summary>
    IPresentationContext<TMessageRoot> PresentationContext { get; }
}
